<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#2f3ba2" />
    <title>Dive Trainer</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="apple-touch-icon" href="icons/icon-192.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="app">
      <header class="app-bar">
        <button id="menuBtn" class="icon-btn" aria-label="menu">â˜°</button>
        <div class="app-title">Dive Trainer</div>
        <div class="app-actions"></div>
      </header>

      <nav id="drawer" class="drawer">
        <div class="drawer-header">é¸å–®</div>
        <button class="drawer-item" data-route="home">
          <span class="icon">ğŸ </span> Home
        </button>
        <button class="drawer-item" data-route="tables">
          <span class="icon">ğŸ§°</span> Tables
        </button>
      </nav>

      <main id="view" class="view"></main>
    </div>

    <template id="tpl-home">
      <section class="home">
        <div class="home-fixed">
          <div class="timer-header">
            <button id="spo2Badge" class="badge disabled" disabled>
              <span class="small">SPO2:</span> --
            </button>
          </div>
          <div class="timer-wrapper">
            <div class="timer">
              <canvas id="ring" width="320" height="320"></canvas>
              <div class="timer-center">
                <div id="timeText" class="time">00:00</div>
                <div id="phaseText" class="phase">Prepare</div>
              </div>
            </div>
            <div class="corner-controls">
              <button id="pauseBtn" class="corner-btn corner-top-left warn" title="é–‹å§‹/æš«åœ"><span class="corner-label">â–¶</span></button>
              <button id="skipBtn" class="corner-btn corner-top-right danger" title="è·³é"><span class="corner-label">â†·</span></button>
              <button id="plus10Btn" class="corner-btn corner-bottom-right" title="+10ç§’"><span class="corner-label">+10s</span></button>
              <button id="markDiaphragmBtn" class="corner-btn corner-bottom-left lung" title="è¨˜éŒ„æ©«è†ˆè†œç¬¬ä¸€æ¬¡æŠ½å‹•"><span class="corner-label">ğŸ«</span></button>
            </div>
          </div>
          <div class="controls primary">
            <button id="pickTableBtn" class="btn">é¸æ“‡ Table â–¾</button>
            <button id="stopBtn" class="btn stop" title="åœæ­¢">â–  åœæ­¢</button>
          </div>
        </div>
        <div id="sessionTableWrap" class="session-table"></div>
      </section>
    </template>

    <template id="tpl-tables">
      <section class="tables">
        <header class="section-header">
          <div class="title">Tables</div>
          <button id="addTableBtn" class="icon-btn">ï¼‹</button>
        </header>
        <div id="tableList" class="card-list"></div>
      </section>
    </template>

    <template id="tpl-edit-table">
      <section class="edit-table">
        <header class="section-header">
          <button id="closeEditBtn" class="icon-btn" title="è¿”å›">â†</button>
          <div class="title" id="editTitle">Edit table</div>
          <button id="doneEditBtn" class="btn primary">Save</button>
        </header>

        <div class="form">
          <label>Table name
            <input id="tableNameInput" type="text" placeholder="ä¾‹å¦‚ï¼šO2-table" />
          </label>
          <label>Table description
            <input id="tableDescInput" type="text" placeholder="èªªæ˜..." />
          </label>
        </div>

        <div class="table-container">
          <div class="grid-header">
            <div><button id="addRowBtn" class="icon-btn add-in-header">ï¼‹</button></div>
            <div>Hold</div>
            <div>Breath</div>
            <div class="right"><button id="reorderBtn" class="icon-btn">â‡…</button></div>
          </div>
          <div id="cycleList" class="cycle-list"></div>
        </div>
      </section>
    </template>

    <template id="tpl-picker">
      <div class="modal-backdrop">
        <div class="modal">
          <div class="modal-title">Tables</div>
          <div id="pickerList" class="card-list"></div>
          <button id="pickerCancel" class="btn danger wide">Cancel</button>
        </div>
      </div>
    </template>

    <template id="tpl-time-picker">
      <div class="modal-backdrop">
        <div class="modal">
          <div class="modal-title">è¨­å®šæ™‚é–“</div>
          <div class="time-picker">
            <div class="time-col">
              <label>åˆ†é˜</label>
              <select id="tpMin"></select>
            </div>
            <div class="time-col">
              <label>ç§’</label>
              <select id="tpSec"></select>
            </div>
          </div>
          <div class="time-actions">
            <button id="tpOk" class="btn primary">OK</button>
            <button id="tpCancel" class="btn danger">Cancel</button>
          </div>
        </div>
      </div>
    </template>

    <template id="tpl-confirm">
      <div class="modal-backdrop">
        <div class="confirm">
          <div class="modal-title">å°šæœªå„²å­˜è®Šæ›´</div>
          <div class="msg">é›¢é–‹å‰è¦å„²å­˜å—ï¼Ÿ</div>
          <div class="actions">
            <button id="cfCancel" class="btn">å–æ¶ˆ</button>
            <button id="cfDiscard" class="btn danger">ä¸å„²å­˜é—œé–‰</button>
            <button id="cfSave" class="btn primary">å„²å­˜</button>
          </div>
        </div>
      </div>
    </template>

    <script src="app.js" type="module"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js');
        });
      }
    </script>
  </body>
  </html>


